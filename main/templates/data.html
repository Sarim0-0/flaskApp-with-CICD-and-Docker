{% extends "base.html" %}
{% block content %}
  <h1>Send Data to Backend</h1>

  <form id="dataForm">
    <input type="text" id="info" placeholder="Enter something" required>
    <button type="submit">Submit</button>
  </form>

  <div id="response"></div>

  <script>
    const form = document.getElementById("dataForm");
    const responseBox = document.getElementById("response");

    form.onsubmit = async (e) => {
      e.preventDefault();
      const data = { info: document.getElementById("info").value };

      try {
        const res = await fetch("/data", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const result = await res.json();
        responseBox.innerHTML = `
          <p><b>Server Response:</b></p>
          <pre>${JSON.stringify(result, null, 2)}</pre>
        `;
      } catch (err) {
        responseBox.innerText = "Error sending data!";
      }
    };
  </script>
{% endblock %}
